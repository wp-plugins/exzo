<?php if (function_exists('dgettext')) { bindtextdomain('pel', dirname(__FILE__) . '/locale'); } else { function dgettext($domain, $str) { return $str; } } class Pel { private static $debug = false; private static $strict = false; private static $exceptions = array(); static function getExceptions() { return self::$exceptions; } static function clearExceptions() { self::$exceptions = array(); } static function maybeThrow(PelException $e) { if (self::$strict) { throw $e; } else { self::$exceptions[] = $e; self::warning('%s (%s:%s)', $e->getMessage(), basename($e->getFile()), $e->getLine()); } } function setStrictParsing($flag) { self::$strict = $flag; } function getStrictParsing() { return self::$strict; } function setDebug($flag) { self::$debug = $flag; } function getDebug() { return self::$debug; } static function debug() { if (self::$debug) { $args = func_get_args(); $str = array_shift($args); vprintf($str . "\n", $args); } } static function warning() { if (self::$debug) { $args = func_get_args(); $str = array_shift($args); vprintf('Warning: ' . $str . "\n", $args); } } static function tra($str) { return dgettext('pel', $str); } static function fmt() { $args = func_get_args(); $str = array_shift($args); return vsprintf(dgettext('pel', $str), $args); } } ?>